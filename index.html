<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport"
					content="width=device-width, initial-scale=1.0" />
		<title>eBay Products</title>
	</head>

	<body>
		<div id="product-container"
				 class="mx-auto max-w-7xl w-full flex-wrap grid xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-10 py-10 px-5"></div>

		<script>
			const endpoint='https://cors-anywhere.herokuapp.com/http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=JSON&appid=YourAppIdHere&siteid=0&version=967&QueryKeywords=harry%20potter&AvailableItemsOnly=true&MaxEntries=8';

			const displayProducts=() => {
				fetch(endpoint)
					.then((response) => {
						if(!response.ok) {
							throw new Error('Network response was not ok');
						}
						return response.json();
					})
					.then((data) => {
						const products=data.Product;
						const productContainer=document.getElementById('product-container');
						products.forEach((product) => {
							// Create the product card element
							const productCard=document.createElement('div');
							productCard.id='product-card';
							productCard.classList.add(
								'mx-auto',
								'h-fit',
								'box-border',
								'flex-wrap',
								'rounded-lg',
								'backdrop',
								'hover:shadow-zinc-800',
								'hover:shadow-lg',
								'hover:-translate-y-1',
								'transition-transform',
								'duration-300'
							);

							// Create the link element for the card
							const link=document.createElement('a');
							link.id='ViewItemURL';
							link.href=product.ViewItemURLForNaturalSearch;
							link.target='_blank';
							link.title='View on eBay';

							// Create the box content element for the card
							const boxContent=document.createElement('div');
							boxContent.classList.add(
								'box-content',
								'h-fit',
								'card',
								'border',
								'border-zinc-100',
								'transition-transform',
								'duration-500',
								'hover:bg-gradient-to-b',
								'from-transparent',
								'to-transparent',
								'via-neutral-300',
								'flex',
								'flex-col',
								'gap-1',
								'rounded-lg'
							);

							// Create the image element for the card
							const img=document.createElement('img');
							img.id='PictureURL';
							img.src=product.PictureURL[0];
							img.alt=product.Title;
							img.classList.add(
								'rounded-t-lg',
								'border-b',
								'border-b-zinc-100',
								'max-w-full',
								'h-72',
								'bg-fixed',
								'bg-neutral-400',
								'bg-center',
								'bg-cover',
								'bg-clip-content',
								'object-top',
								'object-cover',
								'overflow-ellipsis'
							);

							// Create the title element for the card
							const title=document.createElement('h1');
							title.id='Title';
							title.textContent=product.Title;
							title.classList.add(
								'text-lg',
								'text-shadow',
								'text-white',
								'p-1',
								'font-bold'
							);

							// Create the ItemID element for the card
							const itemId=document.createElement('p');
							itemId.id='ItemID';
							itemId.classList.add('hidden');
							itemId.textContent=product.ItemID;

							// Create the condition and quantity elements for the card
							const condition=document.createElement('p');
							condition.id='ConditionDescription';
							condition.classList.add(
								'float-left',
								'text-shadow',
								'text-sm',
								'text-white',
								'font-semibold',
								'italic',
								'p-1',
								'mb-0.5'
							);
							// Handle condition when it is undefined
							if(!product.ConditionDisplayName) {
								condition.textContent='Condition: N/A';
							} else {
								condition.textContent=`Condition: ${product.ConditionDisplayName}`;
							}
							const quantity=document.createElement('p');
							quantity.id='Quantity';
							quantity.classList.add(
								'float-right',
								'text-shadow',
								'text-sm',
								'text-white',
								'font-semibold',
								'italic',
								'p-1',
								'mb-0.5'
							);
							quantity.textContent=`Quantity: ${product.Quantity}`;

							// Create the price element for the card
							const price=document.createElement('p');
							price.id='CurrentPrice';
							price.classList.add(
								'text-shadow',
								'text-lg',
								'text-green-400',
								'font-bold',
								'p-1'
							);
							price.textContent=`Price: $${product.CurrentPrice.Value}`;

							// Append the image, title, condition, quantity and price elements to the box content
							boxContent.append(img,title,itemId,condition,quantity,price);

							// Append the link and box content to the product card
							link.appendChild(boxContent);
							productCard.appendChild(link);

							// Append the product card to the product container
							productContainer.append(productCard);
						});
					})
					.catch((error) => {
						console.error('There was a problem with the fetch operation:',error);
					});
			};

			// Call the function to fetch and display the products
			displayProducts();
		</script>

	</body>

</html>